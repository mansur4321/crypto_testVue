(function(e){function t(t){for(var r,o,a=t[0],s=t[1],l=t[2],f=0,p=[];f<a.length;f++)o=a[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);u&&u(t);while(p.length)p.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},c=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"55fd":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),i=(n("ac1f"),n("5319"),n("b0c0"),n("4de4"),{key:1,class:"form"}),c={class:"wrapper__btn"},o={key:3,class:"form-ban"},a={key:4,class:"wrapper"},s={class:"newCurrency"},l={class:"newCurrency__help"},u={key:0,class:"list-currency"},f={class:"filter"},p={class:"filter__page"},h={class:"filter__coin"},d=Object(r["e"])("hr",{style:{width:"800px"}},null,-1),b=["onClick"],g={class:"currency__name"},k={class:"currency__price"},O={class:"btn"},j=["onClick"],m=Object(r["e"])("hr",{style:{width:"800px"}},null,-1);function v(e,t,n,v,y,w){return Object(r["g"])(),Object(r["d"])(r["a"],null,[void 0!=y.user.login?(Object(r["g"])(),Object(r["d"])("a",{key:0,href:"#",onClick:t[0]||(t[0]=function(e){return w.exit()}),class:"form-ban__btn"}," exit ")):Object(r["c"])("",!0),void 0==y.user.login?(Object(r["g"])(),Object(r["d"])("form",i,[Object(r["k"])(Object(r["e"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return y.login=e}),type:"text",class:"form__login",placeholder:"Login"},null,512),[[r["j"],y.login]]),Object(r["k"])(Object(r["e"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return y.parol=e}),type:"text",class:"form__parol",placeholder:"Parol"},null,512),[[r["j"],y.parol]]),Object(r["e"])("div",c,[Object(r["e"])("a",{href:"#",onClick:t[3]||(t[3]=function(e){return w.registration()}),class:"form__reg"}," registration "),Object(r["e"])("a",{href:"#",onClick:t[4]||(t[4]=function(e){return w.entry()}),class:"form__entry"}," entry ")])])):Object(r["c"])("",!0),y.user.isAdmin?(Object(r["g"])(),Object(r["d"])("a",{key:2,href:"#",onClick:t[5]||(t[5]=function(e){return w.formBan()}),class:"ban"}," Ban ")):Object(r["c"])("",!0),y.banFormIndex?(Object(r["g"])(),Object(r["d"])("form",o,[Object(r["k"])(Object(r["e"])("input",{"onUpdate:modelValue":t[6]||(t[6]=function(e){return y.ban=e}),class:"form-ban__input"},null,512),[[r["j"],y.ban]]),Object(r["e"])("div",null,[Object(r["e"])("a",{href:"#",onClick:t[7]||(t[7]=function(e){return w.banUser()}),class:"form-ban__btn"},"banned")])])):Object(r["c"])("",!0),void 0!=y.user.login?(Object(r["g"])(),Object(r["d"])("div",a,[Object(r["e"])("div",s,[Object(r["k"])(Object(r["e"])("input",{onKeydown:t[8]||(t[8]=Object(r["l"])((function(){return w.tickerAdd&&w.tickerAdd.apply(w,arguments)}),["enter"])),type:"text",placeholder:"Search",class:"newCurrency__add","onUpdate:modelValue":t[9]||(t[9]=function(e){return y.ticker=e})},null,544),[[r["j"],y.ticker]]),Object(r["e"])("div",l,[Object(r["e"])("div",{class:Object(r["f"])([{dsNone:""==y.ticker,dcNone:""==y.helpValueList[0]},"newCurrency__help_elem"]),onClick:t[10]||(t[10]=function(e){return w.replace(0)})},Object(r["i"])(y.helpValueList[0]),3),Object(r["e"])("div",{class:Object(r["f"])([{dsNone:""==y.ticker,dcNone:""==y.helpValueList[1]},"newCurrency__help_elem"]),onClick:t[11]||(t[11]=function(e){return w.replace(1)})},Object(r["i"])(y.helpValueList[1]),3),Object(r["e"])("div",{class:Object(r["f"])([{dsNone:""==y.ticker,dcNone:""==y.helpValueList[2]},"newCurrency__help_elem"]),onClick:t[12]||(t[12]=function(e){return w.replace(2)})},Object(r["i"])(y.helpValueList[2]),3),Object(r["e"])("div",{class:Object(r["f"])([{dsNone:""==y.ticker,dcNone:""==y.helpValueList[3]},"newCurrency__help_elem"]),onClick:t[13]||(t[13]=function(e){return w.replace(3)})},Object(r["i"])(y.helpValueList[3]),3)]),Object(r["e"])("span",null,Object(r["i"])(y.warning),1),Object(r["e"])("a",{onClick:t[14]||(t[14]=function(){return w.tickerAdd&&w.tickerAdd.apply(w,arguments)}),href:"#",class:"newCurrency__btnAdd"},"Add")]),y.tickers.length?(Object(r["g"])(),Object(r["d"])("div",u,[Object(r["e"])("div",f,[Object(r["e"])("div",p,[y.page>1?(Object(r["g"])(),Object(r["d"])("a",{key:0,onClick:t[15]||(t[15]=function(){return w.pageDown&&w.pageDown.apply(w,arguments)}),class:"pageButton-currency-back filter__page_button"},"Back")):Object(r["c"])("",!0),3*y.page<y.numLastTicker?(Object(r["g"])(),Object(r["d"])("a",{key:1,onClick:t[16]||(t[16]=function(){return w.pageUp&&w.pageUp.apply(w,arguments)}),class:"pageButton-currency-next filter__page_button"},"Next")):Object(r["c"])("",!0)]),Object(r["e"])("div",h,[Object(r["k"])(Object(r["e"])("input",{"onUpdate:modelValue":t[17]||(t[17]=function(e){return y.tickerFilter=e}),type:"text",class:"filter-currency",placeholder:"FILTER"},null,512),[[r["j"],y.tickerFilter]])])]),d,(Object(r["g"])(!0),Object(r["d"])(r["a"],null,Object(r["h"])(y.tickers,(function(e){return Object(r["g"])(),Object(r["d"])("div",{onClick:function(t){return y.sel=e},key:e.name,class:Object(r["f"])(["currency",{bdColor:y.sel==e,ddNone:0==e.filter,errorBackground:0==e.errorBack}])},[Object(r["e"])("p",g,Object(r["i"])(e.name)+" - USD",1),Object(r["e"])("p",k,Object(r["i"])(w.formatPrice(e.price)),1),Object(r["e"])("div",O,[Object(r["e"])("a",{onClick:function(t){return w.tickerDelete(e.name)},href:"#",class:"currency__btnDel"},"Delete",8,j)])],10,b)})),128)),m])):Object(r["c"])("",!0)])):Object(r["c"])("",!0)],64)}var y=n("1da1"),w=(n("96cf"),n("c1f9"),n("d3b7"),n("ddb0"),n("3ca3"),n("2b3d"),n("99af"),n("159b"),n("b680"),n("7db0"),n("4ec9"),n("fb6a"),"5"),_="INVALID_SUB",C={off:1,on:0},x={BTC:"BTC",USD:"USD"},T=new Map,S=new Map,L=new Map,P=1,U=new SharedWorker("newWorker.js");function B(e,t){var n=e.slice(9);return D(D(n,t),t)}function D(e,t){return e.replace("~".concat(t),"")}function V(e){void 0==T.get(x.BTC)&&U.port.postMessage({name:x.BTC,countIn:x.USD,operation:"sub"}),U.port.postMessage({name:e,countIn:x.BTC,operation:"sub"})}function A(e){var t=T.get(B(e,x.BTC)),n=t[1];n(B(e,x.BTC),C.on)}function E(e,t){var n=T.get(e),r=n[0],i=n[1];r(e,t),i(e,C.off)}U.port.start(),U.port.addEventListener("message",(function(e){var t=e.data,n=t.TYPE,r=t.FROMSYMBOL,i=t.PRICE,c=t.MESSAGE,o=t.PARAMETER,a=t.TOSYMBOL;return console.log(e.data),r==x.BTC&&(P=i,L.forEach((function(e,t){E(t,e*P)}))),c==_?-1!=o.indexOf("BTC~BTC")?void A(o):void V(B(o,x.USD)):n===w?a==x.BTC?(L.set(r,i),i*=P,E(r,i),void S.set(r,x.BTC)):void E(r,i):void 0}));var F=function(e,t){T.set(e,t),S.set(e,x.USD),U.port.postMessage({name:e,countIn:x.USD,operation:"sub"})},I=function(e){var t=S.get(e);S.delete(e),T.delete(e),U.port.postMessage({name:e,countIn:t,operation:"unsub"})},M=n("bee2"),N=n("257e"),R=n("262e"),J=n("2caf"),Y=n("ade3"),W=n("d4ec"),G=function e(t,n){Object(W["a"])(this,e),this.login=t,this.parol=n,this.isAdmin=!1,this.banUser=!1},K=function(e){Object(R["a"])(n,e);var t=Object(J["a"])(n);function n(){var e;Object(W["a"])(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),Object(Y["a"])(Object(N["a"])(e),"isAdmin",!0),e}return Object(M["a"])(n,[{key:"ban",value:function(e){0==e.isAdmin?e.banUser=!0:alert("Вы не можете забанить админа!")}}]),n}(G);function q(e,t){return new K(e,t)}function z(e,t){return new G(e,t)}var H={data:function(){return{users:[],user:{},login:"",parol:"",ban:"",banFormIndex:!1,ticker:"",tickers:[],helpValueList:["","","",""],sel:null,warning:"",listTicker:"",tickerFilter:"",page:1,numLastTicker:null}},computed:{amountCoinInPage:function(){return 3*this.page-1},maxCoinPreviousPage:function(){return 3*(this.page-1)},windowData:function(){return Object.fromEntries(new URL(window.location).searchParams.entries())}},watch:{ticker:function(){this.warning_delValue(),this.help()},tickers:function(){this.filterCoin(),this.numLastTicker-=1,this.numLastTicker<this.maxCoinPreviousPage&&1!=this.page&&this.pageDown()},tickerFilter:function(){this.page=1,this.filterCoin(),window.history.pushState(null,document.title,"".concat(window.location.pathname,"?filter=").concat(this.tickerFilter,"&page=").concat(this.page))},page:function(){this.filterCoin(),window.history.pushState(null,document.title,"".concat(window.location.pathname,"?filter=").concat(this.tickerFilter,"&page=").concat(this.page))}},created:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.windowData.filter&&(this.tickerFilter=this.windowData.filter),this.windowData.page&&(this.page=this.windowData.page),e.next=4,fetch("https://min-api.cryptocompare.com/data/all/coinlist?summary=true");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,this.listTicker=n.Data,this.tickers=JSON.parse(sessionStorage.tickers),this.tickers.forEach((function(e){F(e.name,[function(e,t){r.updateTicker(e,t)},function(e,t){r.socketError(e,t)}])})),this.filterCoin();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{formatPrice:function(e){return"-"===e||void 0==e||""===e?e:e>1?e.toFixed(2):e.toPrecision(2)},updateTicker:function(e,t){this.tickers.filter((function(t){return t.name==e})).forEach((function(e){return e.price=t}))},exit:function(){this.user={},this.banFormIndex&&this.formBan()},registration:function(){var e=this;if(""!=this.login&&""!=this.parol){if("admin"==this.login&&"admin"==this.parol)this.user=q(this.login,this.parol);else{if(this.users.find((function(t){return t.login==e.login})))return void alert("такой логин уже есть");this.user=z(this.login,this.parol),this.users.push(Object.assign({},this.user))}this.nullParLog()}else alert("вы не заполнили строку логина или пароля")},entry:function(){var e=this;if(""!=this.login&&""!=this.parol){if("admin"==this.login&&"admin"==this.parol)this.user=q(this.login,this.parol);else if(this.users.find((function(t){return t.login==e.login}))){var t=this.users.find((function(t){return t.login==e.login}));if(t.parol==this.parol&&(this.user=this.users.find((function(t){return t.login==e.login}))),1==this.user.banUser)return this.user={},void alert("Этот пользователь забанен")}else alert("Пользователь не зарегистрирован");this.nullParLog()}else alert("вы не заполнили строку логина или пароля")},nullParLog:function(){this.login="",this.parol=""},banUser:function(){var e=this;""!=this.ban?this.users.find((function(t){return t.login==e.ban})).banUser=!0:alert("не указан пользователь")},formBan:function(){this.banFormIndex=!this.banFormIndex},tickerAdd:function(){var e=this;if(void 0==this.tickers.find((function(t){return t.name.toUpperCase()==e.ticker.toUpperCase()}))){var t={name:this.ticker,price:"-"};this.tickers.push(t),F(t.name,[function(t,n){e.updateTicker(t,n)},function(t,n){e.socketError(t,n)}]),sessionStorage.tickers=JSON.stringify(this.tickers),this.ticker=""}else this.warning="Такая валюта уже есть";this.filterCoin()},replace:function(e){this.ticker=this.helpValueList[e],this.tickerAdd()},help:function(){var e=0;for(var t in this.listTicker)if(this.listTicker["".concat(t)].Symbol.indexOf("".concat(this.ticker))+1){if(!(e<4))break;if(this.helpValueList[e]=this.listTicker["".concat(t)].Symbol,e++,e<4)for(var n=e;n<4;n++)this.helpValueList[n]=""}if(0==this.ticker)for(var r=0;r<4;r++)this.helpValueList[r]=""},filterCoin:function(){for(var e=0;e<this.tickers.length;e++){var t=this.tickers[e].name.toUpperCase();t.indexOf(this.tickerFilter.toUpperCase())+1?this.tickers[e].filter=1:this.tickers[e].filter=0}this.filterPage()},filterPage:function(){var e=this,t=this.tickers.filter((function(e){return 1==e.filter}));this.numLastTicker=t.length;for(var n=function(n){n<=e.amountCoinInPage&&n>e.amountCoinInPage-3?e.tickers.find((function(e){return e.name==t[n].name})).filter=1:e.tickers.find((function(e){return e.name==t[n].name})).filter=0},r=0;r<t.length;r++)n(r)},warning_delValue:function(){this.warning=""},socketError:function(e,t){0==t?this.tickers.filter((function(t){return t.name==e})).forEach((function(e){return e.errorBack=0})):1==t&&this.tickers.filter((function(t){return t.name==e})).forEach((function(e){return e.errorBack=1}))},tickerDelete:function(e){this.tickers=this.tickers.filter((function(t){return t.name!=e})),sessionStorage.tickers=JSON.stringify(this.tickers),I(e)},pageUp:function(){this.page+=1},pageDown:function(){this.page-=1}}};n("eea2");H.render=v;var Q=H;Object(r["b"])(Q).mount("#app")},eea2:function(e,t,n){"use strict";n("55fd")}});
//# sourceMappingURL=app.85e0f30c.js.map