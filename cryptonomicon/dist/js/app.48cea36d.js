(function(e){function t(t){for(var r,o,a=t[0],s=t[1],u=t[2],f=0,p=[];f<a.length;f++)o=a[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(p.length)p.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==i[s]&&(r=!1)}r&&(c.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},c=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"55fd":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),i=(n("ac1f"),n("5319"),n("b0c0"),n("4de4"),{class:"wrapper"}),c={class:"newCurrency"},o={class:"newCurrency__help"},a={key:0,class:"list-currency"},s={class:"filter"},u={class:"filter__page"},l={class:"filter__coin"},f=Object(r["e"])("span",{style:{color:"#A556B6"}},"FILTER -",-1),p=Object(r["e"])("hr",{style:{width:"800px"}},null,-1),h=["onClick"],d={class:"currency__name"},k={class:"currency__price"},b={class:"btn"},g=["onClick"],O=Object(r["e"])("hr",{style:{width:"800px"}},null,-1);function j(e,t,n,j,m,v){return Object(r["g"])(),Object(r["d"])("div",i,[Object(r["e"])("div",c,[Object(r["k"])(Object(r["e"])("input",{onKeydown:t[0]||(t[0]=Object(r["l"])((function(){return v.tickerAdd&&v.tickerAdd.apply(v,arguments)}),["enter"])),type:"text",placeholder:"name",class:"newCurrency__add","onUpdate:modelValue":t[1]||(t[1]=function(e){return m.ticker=e})},null,544),[[r["j"],m.ticker]]),Object(r["e"])("div",o,[Object(r["e"])("div",{class:Object(r["f"])([{dsNone:""==m.ticker,dcNone:""==m.helpValueList[0]},"newCurrency__help_elem"]),onClick:t[2]||(t[2]=function(e){return v.replace(0)})},Object(r["i"])(m.helpValueList[0]),3),Object(r["e"])("div",{class:Object(r["f"])([{dsNone:""==m.ticker,dcNone:""==m.helpValueList[1]},"newCurrency__help_elem"]),onClick:t[3]||(t[3]=function(e){return v.replace(1)})},Object(r["i"])(m.helpValueList[1]),3),Object(r["e"])("div",{class:Object(r["f"])([{dsNone:""==m.ticker,dcNone:""==m.helpValueList[2]},"newCurrency__help_elem"]),onClick:t[4]||(t[4]=function(e){return v.replace(2)})},Object(r["i"])(m.helpValueList[2]),3),Object(r["e"])("div",{class:Object(r["f"])([{dsNone:""==m.ticker,dcNone:""==m.helpValueList[3]},"newCurrency__help_elem"]),onClick:t[5]||(t[5]=function(e){return v.replace(3)})},Object(r["i"])(m.helpValueList[3]),3)]),Object(r["e"])("span",null,Object(r["i"])(m.warning),1),Object(r["e"])("a",{onClick:t[6]||(t[6]=function(){return v.tickerAdd&&v.tickerAdd.apply(v,arguments)}),href:"#",class:"newCurrency__btnAdd"},"Добавить")]),m.tickers.length?(Object(r["g"])(),Object(r["d"])("div",a,[Object(r["e"])("div",s,[Object(r["e"])("div",u,[m.page>1?(Object(r["g"])(),Object(r["d"])("a",{key:0,onClick:t[7]||(t[7]=function(){return v.pageDown&&v.pageDown.apply(v,arguments)}),class:"pageButton-currency-back filter__page_button"},"back")):Object(r["c"])("",!0),3*m.page<m.numLastTicker?(Object(r["g"])(),Object(r["d"])("a",{key:1,onClick:t[8]||(t[8]=function(){return v.pageUp&&v.pageUp.apply(v,arguments)}),class:"pageButton-currency-next filter__page_button"},"next")):Object(r["c"])("",!0)]),Object(r["e"])("div",l,[f,Object(r["k"])(Object(r["e"])("input",{"onUpdate:modelValue":t[9]||(t[9]=function(e){return m.tickerFilter=e}),type:"text",class:"filter-currency"},null,512),[[r["j"],m.tickerFilter]])])]),p,(Object(r["g"])(!0),Object(r["d"])(r["a"],null,Object(r["h"])(m.tickers,(function(e){return Object(r["g"])(),Object(r["d"])("div",{onClick:function(t){return m.sel=e},key:e.name,class:Object(r["f"])(["currency",{bdColor:m.sel==e,ddNone:0==e.filter,errorBackground:0==e.errorBack}])},[Object(r["e"])("p",d,Object(r["i"])(e.name)+" - USD",1),Object(r["e"])("p",k,Object(r["i"])(v.formatPrice(e.price)),1),Object(r["e"])("div",b,[Object(r["e"])("a",{onClick:function(t){return v.tickerDelete(e.name)},href:"#",class:"currency__btnDel"},"Удалить",8,g)])],10,h)})),128)),O])):Object(r["c"])("",!0)])}var m=n("1da1"),v=(n("96cf"),n("c1f9"),n("d3b7"),n("ddb0"),n("3ca3"),n("2b3d"),n("99af"),n("159b"),n("b680"),n("7db0"),n("4ec9"),n("fb6a"),"5"),w="INVALID_SUB",y={off:1,on:0},C={BTC:"BTC",USD:"USD"},_=new Map,T=new Map,S=new Map,L=1,B=new SharedWorker("newWorker.js");function P(e,t){var n=e.slice(9);return x(x(n,t),t)}function x(e,t){return e.replace("~".concat(t),"")}function D(e){void 0==_.get(C.BTC)&&B.port.postMessage({name:C.BTC,countIn:C.USD,operation:"sub"}),B.port.postMessage({name:e,countIn:C.BTC,operation:"sub"})}function U(e){var t=_.get(P(e,C.BTC)),n=t[1];n(P(e,C.BTC),y.on)}function V(e,t){var n=_.get(e),r=n[0],i=n[1];r(e,t),i(e,y.off)}B.port.start(),B.port.addEventListener("message",(function(e){var t=e.data,n=t.TYPE,r=t.FROMSYMBOL,i=t.PRICE,c=t.MESSAGE,o=t.PARAMETER,a=t.TOSYMBOL;return console.log(e.data),r==C.BTC&&(L=i,S.forEach((function(e,t){V(t,e*L)}))),c==w?-1!=o.indexOf("BTC~BTC")?void U(o):void D(P(o,C.USD)):n===v?a==C.BTC?(S.set(r,i),i*=L,V(r,i),void T.set(r,C.BTC)):void V(r,i):void 0}));var E=function(e,t){_.set(e,t),T.set(e,C.USD),B.port.postMessage({name:e,countIn:C.USD,operation:"sub"})},M=function(e){var t=T.get(e);T.delete(e),_.delete(e),B.port.postMessage({name:e,countIn:t,operation:"unsub"})},N={data:function(){return{ticker:"",tickers:[{name:"",price:"",filter:1,errorBack:1}],helpValueList:["","","",""],sel:null,warning:"",listTicker:"",tickerFilter:"",page:1,numLastTicker:null}},computed:{amountCoinInPage:function(){return 3*this.page-1},maxCoinPreviousPage:function(){return 3*(this.page-1)},windowData:function(){return Object.fromEntries(new URL(window.location).searchParams.entries())}},watch:{ticker:function(){this.warning_delValue(),this.help()},tickers:function(){this.filterCoin(),this.numLastTicker-=1,this.numLastTicker<this.maxCoinPreviousPage&&1!=this.page&&this.pageDown()},tickerFilter:function(){this.page=1,this.filterCoin(),window.history.pushState(null,document.title,"".concat(window.location.pathname,"?filter=").concat(this.tickerFilter,"&page=").concat(this.page))},page:function(){this.filterCoin(),window.history.pushState(null,document.title,"".concat(window.location.pathname,"?filter=").concat(this.tickerFilter,"&page=").concat(this.page))}},created:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.windowData.filter&&(this.tickerFilter=this.windowData.filter),this.windowData.page&&(this.page=this.windowData.page),e.next=4,fetch("https://min-api.cryptocompare.com/data/all/coinlist?summary=true");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,this.listTicker=n.Data,this.tickers=JSON.parse(sessionStorage.tickers),this.tickers.forEach((function(e){E(e.name,[function(e,t){r.updateTicker(e,t)},function(e,t){r.socketError(e,t)}])})),this.filterCoin();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{formatPrice:function(e){return"-"===e||void 0==e||""===e?e:(console.log(e),e>1?e.toFixed(2):e.toPrecision(2))},updateTicker:function(e,t){this.tickers.filter((function(t){return t.name==e})).forEach((function(e){return e.price=t}))},tickerAdd:function(){var e=this;if(void 0==this.tickers.find((function(t){return t.name.toUpperCase()==e.ticker.toUpperCase()}))){var t={name:this.ticker,price:"-"};this.tickers.push(t),E(t.name,[function(t,n){e.updateTicker(t,n)},function(t,n){e.socketError(t,n)}]),sessionStorage.tickers=JSON.stringify(this.tickers),this.ticker=""}else this.warning="Такая валюта уже есть";this.filterCoin()},replace:function(e){this.ticker=this.helpValueList[e],this.tickerAdd()},help:function(){var e=0;for(var t in this.listTicker)if(this.listTicker["".concat(t)].Symbol.indexOf("".concat(this.ticker))+1){if(!(e<4))break;if(this.helpValueList[e]=this.listTicker["".concat(t)].Symbol,e++,e<4)for(var n=e;n<4;n++)this.helpValueList[n]=""}if(0==this.ticker)for(var r=0;r<4;r++)this.helpValueList[r]=""},filterCoin:function(){for(var e=0;e<this.tickers.length;e++){var t=this.tickers[e].name.toUpperCase();t.indexOf(this.tickerFilter.toUpperCase())+1?this.tickers[e].filter=1:this.tickers[e].filter=0}this.filterPage()},filterPage:function(){var e=this,t=this.tickers.filter((function(e){return 1==e.filter}));this.numLastTicker=t.length;for(var n=function(n){n<=e.amountCoinInPage&&n>e.amountCoinInPage-3?e.tickers.find((function(e){return e.name==t[n].name})).filter=1:e.tickers.find((function(e){return e.name==t[n].name})).filter=0},r=0;r<t.length;r++)n(r)},warning_delValue:function(){this.warning=""},socketError:function(e,t){0==t?this.tickers.filter((function(t){return t.name==e})).forEach((function(e){return e.errorBack=0})):1==t&&this.tickers.filter((function(t){return t.name==e})).forEach((function(e){return e.errorBack=1}))},tickerDelete:function(e){this.tickers=this.tickers.filter((function(t){return t.name!=e})),sessionStorage.tickers=JSON.stringify(this.tickers),M(e)},pageUp:function(){this.page+=1},pageDown:function(){this.page-=1}}};n("eea2");N.render=j;var A=N;Object(r["b"])(A).mount("#app")},eea2:function(e,t,n){"use strict";n("55fd")}});
//# sourceMappingURL=app.48cea36d.js.map