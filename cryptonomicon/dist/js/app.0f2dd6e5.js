(function(e){function t(t){for(var r,a,o=t[0],s=t[1],u=t[2],f=0,p=[];f<o.length;f++)a=o[f],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&p.push(i[a][0]),i[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(p.length)p.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==i[s]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"55fd":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),i=(n("b0c0"),n("4de4"),{class:"wrapper"}),c={key:0,class:"list-currency"},a={class:"filter"},o={class:"filter__page"},s={class:"filter__coin"},u=Object(r["e"])("span",{style:{color:"#A556B6"}},"FILTER -",-1),l=["onClick"],f={class:"currency__name"},p={class:"currency__price"},d={class:"btn"},h=["onClick"];function k(e,t,n,k,b,g){var O=Object(r["j"])("add-ticker"),j=Object(r["j"])("line-width");return Object(r["h"])(),Object(r["d"])("div",i,[Object(r["f"])(O,{onAddTick:g.tickerAdd,helpValueList:b.helpValueList,onHelpTickAdd:g.help,onWarningDelValue:g.warning_delValue,warning:b.warning},null,8,["onAddTick","helpValueList","onHelpTickAdd","onWarningDelValue","warning"]),b.tickers.length?(Object(r["h"])(),Object(r["d"])("div",c,[Object(r["e"])("div",a,[Object(r["e"])("div",o,[b.page>1?(Object(r["h"])(),Object(r["d"])("a",{key:0,onClick:t[0]||(t[0]=function(){return g.pageDown&&g.pageDown.apply(g,arguments)}),class:"pageButton-currency-back filter__page_button"},"back")):Object(r["c"])("",!0),3*b.page<b.numLastTicker?(Object(r["h"])(),Object(r["d"])("a",{key:1,onClick:t[1]||(t[1]=function(){return g.pageUp&&g.pageUp.apply(g,arguments)}),class:"pageButton-currency-next filter__page_button"},"next")):Object(r["c"])("",!0)]),Object(r["e"])("div",s,[u,Object(r["m"])(Object(r["e"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return b.tickerFilter=e}),type:"text",class:"filter-currency"},null,512),[[r["l"],b.tickerFilter]])])]),Object(r["f"])(j),(Object(r["h"])(!0),Object(r["d"])(r["a"],null,Object(r["i"])(b.tickers,(function(e){return Object(r["h"])(),Object(r["d"])("div",{onClick:function(t){return b.sel=e},key:e.name,class:Object(r["g"])(["currency",{bdColor:b.sel==e,ddNone:0==e.filter,errorBackground:0==e.errorBack}])},[Object(r["e"])("p",f,Object(r["k"])(e.name)+" - USD",1),Object(r["e"])("p",p,Object(r["k"])(g.formatPrice(e.price)),1),Object(r["e"])("div",d,[Object(r["e"])("a",{onClick:function(t){return g.tickerDelete(e.name)},href:"#",class:"currency__btnDel"},"Удалить",8,h)])],10,l)})),128)),Object(r["f"])(j)])):Object(r["c"])("",!0)])}var b=n("1da1"),g=(n("96cf"),n("c1f9"),n("d3b7"),n("ddb0"),n("3ca3"),n("2b3d"),n("99af"),n("159b"),n("b680"),n("7db0"),n("4ec9"),n("fb6a"),n("ac1f"),n("5319"),"5"),O="INVALID_SUB",j={off:1,on:0},m={BTC:"BTC",USD:"USD"},v=new Map,w=new Map,y=new Map,C=1,_=new SharedWorker("newWorker.js");function T(e,t){var n=e.slice(9);return S(S(n,t),t)}function S(e,t){return e.replace("~".concat(t),"")}function L(e){void 0==v.get(m.BTC)&&_.port.postMessage({name:m.BTC,countIn:m.USD,operation:"sub"}),_.port.postMessage({name:e,countIn:m.BTC,operation:"sub"})}function B(e){var t=v.get(T(e,m.BTC)),n=t[1];n(T(e,m.BTC),j.on)}function V(e,t){var n=v.get(e),r=n[0],i=n[1];r(e,t),i(e,j.off)}_.port.start(),_.port.addEventListener("message",(function(e){var t=e.data,n=t.TYPE,r=t.FROMSYMBOL,i=t.PRICE,c=t.MESSAGE,a=t.PARAMETER,o=t.TOSYMBOL;return console.log(e.data),r==m.BTC&&(C=i,y.forEach((function(e,t){V(t,e*C)}))),c==O?-1!=a.indexOf("BTC~BTC")?void B(a):void L(T(a,m.USD)):n===g?o==m.BTC?(y.set(r,i),i*=C,V(r,i),void w.set(r,m.BTC)):void V(r,i):void 0}));var D=function(e,t){v.set(e,t),w.set(e,m.USD),_.port.postMessage({name:e,countIn:m.USD,operation:"sub"})},P=function(e){var t=w.get(e);w.delete(e),v.delete(e),_.port.postMessage({name:e,countIn:t,operation:"unsub"})},x={style:{width:"800px"}};function A(e,t){return Object(r["h"])(),Object(r["d"])("hr",x)}const U={};U.render=A;var E=U,M={class:"newCurrency"},N={class:"newCurrency__help"};function F(e,t,n,i,c,a){var o=Object(r["j"])("add-button");return Object(r["h"])(),Object(r["d"])("div",M,[Object(r["m"])(Object(r["e"])("input",{onKeydown:t[0]||(t[0]=Object(r["n"])((function(){return a.tickerAdd&&a.tickerAdd.apply(a,arguments)}),["enter"])),type:"text",placeholder:"name",class:"newCurrency__add","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.ticker=e})},null,544),[[r["l"],c.ticker]]),Object(r["e"])("div",N,[Object(r["e"])("div",{class:Object(r["g"])([{dsNone:""==c.ticker,dcNone:""==n.helpValueList[0]},"newCurrency__help_elem"]),onClick:t[2]||(t[2]=function(e){return a.replace(0)})},Object(r["k"])(n.helpValueList[0]),3),Object(r["e"])("div",{class:Object(r["g"])([{dsNone:""==c.ticker,dcNone:""==n.helpValueList[1]},"newCurrency__help_elem"]),onClick:t[3]||(t[3]=function(e){return a.replace(1)})},Object(r["k"])(n.helpValueList[1]),3),Object(r["e"])("div",{class:Object(r["g"])([{dsNone:""==c.ticker,dcNone:""==n.helpValueList[2]},"newCurrency__help_elem"]),onClick:t[4]||(t[4]=function(e){return a.replace(2)})},Object(r["k"])(n.helpValueList[2]),3),Object(r["e"])("div",{class:Object(r["g"])([{dsNone:""==c.ticker,dcNone:""==n.helpValueList[3]},"newCurrency__help_elem"]),onClick:t[5]||(t[5]=function(e){return a.replace(3)})},Object(r["k"])(n.helpValueList[3]),3)]),Object(r["e"])("span",null,Object(r["k"])(n.warning),1),Object(r["f"])(o,{onClick:a.tickerAdd},null,8,["onClick"])])}var I={href:"#",class:"newCurrency__btnAdd"};function R(e,t){return Object(r["h"])(),Object(r["d"])("a",I," Добавить ")}const J={};J.render=R;var W=J,Y={components:{addButton:W},data:function(){return{ticker:""}},props:{helpValueList:Object,warning:String},watch:{ticker:function(){this.$emit("warning-del-value"),this.$emit("help-tick-add",this.ticker)}},methods:{tickerAdd:function(){this.$emit("add-tick",this.ticker),this.ticker=""},replace:function(e){this.ticker=this.helpValueList[e],this.tickerAdd()}}};Y.render=F;var $=Y,H={components:{lineWidth:E,AddTicker:$},data:function(){return{tickers:[{name:"",price:"",filter:1,errorBack:1}],helpValueList:["","","",""],sel:null,warning:"",listTicker:"",tickerFilter:"",page:1,numLastTicker:null}},computed:{amountCoinInPage:function(){return 3*this.page-1},maxCoinPreviousPage:function(){return 3*(this.page-1)},windowData:function(){return Object.fromEntries(new URL(window.location).searchParams.entries())}},watch:{tickers:function(){this.filterCoin(),this.numLastTicker-=1,this.numLastTicker<this.maxCoinPreviousPage&&1!=this.page&&this.pageDown()},tickerFilter:function(){this.page=1,this.filterCoin(),window.history.pushState(null,document.title,"".concat(window.location.pathname,"?filter=").concat(this.tickerFilter,"&page=").concat(this.page))},page:function(){this.filterCoin(),window.history.pushState(null,document.title,"".concat(window.location.pathname,"?filter=").concat(this.tickerFilter,"&page=").concat(this.page))}},created:function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.windowData.filter&&(this.tickerFilter=this.windowData.filter),this.windowData.page&&(this.page=this.windowData.page),e.next=4,fetch("https://min-api.cryptocompare.com/data/all/coinlist?summary=true");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,this.listTicker=n.Data,this.tickers=JSON.parse(sessionStorage.tickers),this.tickers.forEach((function(e){D(e.name,[function(e,t){r.updateTicker(e,t)},function(e,t){r.socketError(e,t)}])})),this.filterCoin();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{formatPrice:function(e){return"-"===e||void 0==e||""===e?e:(console.log(e),e>1?e.toFixed(2):e.toPrecision(2))},updateTicker:function(e,t){this.tickers.filter((function(t){return t.name==e})).forEach((function(e){return e.price=t}))},tickerAdd:function(e){var t=this;if(void 0==this.tickers.find((function(t){return t.name.toUpperCase()==e.toUpperCase()}))){var n={name:e,price:"-"};this.tickers.push(n),D(n.name,[function(e,n){t.updateTicker(e,n)},function(e,n){t.socketError(e,n)}]),sessionStorage.tickers=JSON.stringify(this.tickers)}else this.warning="Такая валюта уже есть";this.filterCoin()},help:function(e){var t=0;for(var n in this.listTicker)if(this.listTicker["".concat(n)].Symbol.indexOf("".concat(e))+1){if(!(t<4))break;if(this.helpValueList[t]=this.listTicker["".concat(n)].Symbol,t++,t<4)for(var r=t;r<4;r++)this.helpValueList[r]=""}if(0==e)for(var i=0;i<4;i++)this.helpValueList[i]=""},filterCoin:function(){for(var e=0;e<this.tickers.length;e++){var t=this.tickers[e].name.toUpperCase();t.indexOf(this.tickerFilter.toUpperCase())+1?this.tickers[e].filter=1:this.tickers[e].filter=0}this.filterPage()},filterPage:function(){var e=this,t=this.tickers.filter((function(e){return 1==e.filter}));this.numLastTicker=t.length;for(var n=function(n){n<=e.amountCoinInPage&&n>e.amountCoinInPage-3?e.tickers.find((function(e){return e.name==t[n].name})).filter=1:e.tickers.find((function(e){return e.name==t[n].name})).filter=0},r=0;r<t.length;r++)n(r)},warning_delValue:function(){this.warning=""},socketError:function(e,t){0==t?this.tickers.filter((function(t){return t.name==e})).forEach((function(e){return e.errorBack=0})):1==t&&this.tickers.filter((function(t){return t.name==e})).forEach((function(e){return e.errorBack=1}))},tickerDelete:function(e){this.tickers=this.tickers.filter((function(t){return t.name!=e})),sessionStorage.tickers=JSON.stringify(this.tickers),P(e)},pageUp:function(){this.page+=1},pageDown:function(){this.page-=1}}};n("eea2");H.render=k;var G=H;Object(r["b"])(G).mount("#app")},eea2:function(e,t,n){"use strict";n("55fd")}});
//# sourceMappingURL=app.0f2dd6e5.js.map